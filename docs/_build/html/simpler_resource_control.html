

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Simpler reseller resource control &mdash; XtendWeb nginX control v4.0</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="XtendWeb nginX control v4.0" href="index.html"/>
        <link rel="next" title="Support" href="Support.html"/>
        <link rel="prev" title="XtendWeb User docs" href="user_docs.html"/>
    <link href="_static/style.css" rel="stylesheet" type="text/css">


  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> XtendWeb
          

          
            
            <img src="_static/XtendWeb.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">XtendWeb Cluster - Installation &amp; Basic Configuration</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation_standalone.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation_cluster.html">Cluster Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation_cluster.html#xtendweb-cluster-requirements">XtendWeb Cluster Requirements:</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation_cluster.html#xtendweb-cluster-setup">XtendWeb cluster setup:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mod_remoteip.html">mod_remoteip</a></li>
<li class="toctree-l1"><a class="reference internal" href="brotli_compression.html">brotli_compression</a></li>
<li class="toctree-l1"><a class="reference internal" href="http2.html">http2</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModSecurity.html">ModSecurity</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ModSecurity.html#install-modsecurity">Install ModSecurity</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Naxsi.html">Naxsi</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_docs.html">XtendWeb User docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user_docs.html#setup-url-redirects">Setup URL Redirects</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_docs.html#enable-directory-listing">Enable Directory listing</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_docs.html#content-optimization">Content Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_docs.html#security-headers">Security Headers</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Simpler reseller resource control</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-does-simpler-work">How does simpleR work</a></li>
<li class="toctree-l2"><a class="reference internal" href="#faq">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#default-resource">Default resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tools-to-view-resource-usage">Tools to view resource usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#limit-httpd-resource">Limit httpd resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="#to-view-systemd-config-loaded">To view systemd config loaded</a></li>
<li class="toctree-l2"><a class="reference internal" href="#to-view-the-cgroup-tree">To view the cgroup tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="#support">Support?</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Support and Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Support.html">Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Support.html#if-you-have-already-purchased-a-support-plan">If you have already purchased a support plan</a></li>
<li class="toctree-l2"><a class="reference internal" href="Support.html#bug-report">Bug Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="Support.html#announcements">Announcements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Project_sponsors.html">Project Sponsors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Project_sponsors.html#credits">CREDITS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Partner_webhosts.html">Partner Webhosts</a></li>
</ul>
<p class="caption"><span class="caption-text">Application servers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="HHVM.html">Setting up HHVM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HHVM.html#on-centos7-cloudlinux7">On CentOS7 / CloudLinux7</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="PHP.html">Setting up PHP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="PHP.html#on-centos6-centos7">On CentOS6/CentOS7</a></li>
<li class="toctree-l2"><a class="reference internal" href="PHP.html#on-cloudlinux6-cloudlinux7">On CloudLinux6/CloudLinux7</a></li>
<li class="toctree-l2"><a class="reference internal" href="PHP.html#secure-php-fpm-setup">Secure php-fpm setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="PHP.html#where-are-my-php-logs">Where are my php logs?</a></li>
<li class="toctree-l2"><a class="reference internal" href="PHP.html#zendopcache-and-security-considerations-on-php-fpm-single-master-setup">ZendOpcache and security considerations on php-fpm single master setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="PHP.html#per-user-php-ini-custom-settings">Per user php.ini custom settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="PHP.html#high-performance-wordpress-setup-using-redis-cache-and-nginx-helper-plugin">High Performance Wordpress setup using Redis cache and nginx-helper plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="PYTHON_WSGI.html">Setting up Python (WSGI app)</a></li>
<li class="toctree-l1"><a class="reference internal" href="RUBY_RACK.html">Setting up Ruby(Rack app)</a></li>
<li class="toctree-l1"><a class="reference internal" href="NodeJS.html">Setting up NodeJS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Meteor.html">Setting up Meteor</a></li>
<li class="toctree-l1"><a class="reference internal" href="ColdFusion_Java.html">Setting up ColdFusion or Java</a></li>
</ul>
<p class="caption"><span class="caption-text">Administration &amp; Monitoring</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="XtendWeb_Administration.html">Administration of XtendWeb plugin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#layer7-application-layer-ddos-mitigation">Layer7(Application layer) DDOS mitigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#automatic-fixing-of-most-errors">Automatic fixing of most errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#managing-default-server-settings">Managing default server settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#automatic-selection-of-template-based-on-application">Automatic selection of template based on application</a></li>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#adding-application-templates">Adding application templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#adding-application-servers-or-backends">Adding Application servers or backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#upgrading-xtendweb-and-nginx">Upgrading XtendWeb and nginx</a></li>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#xtendweb-cluster-upgrade">XtendWeb cluster upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#migrating-xtendweb-settings">Migrating Xtendweb settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#temporarily-disable-the-plugin">Temporarily disable the plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="XtendWeb_Administration.html#uninstall-the-plugin">Uninstall the plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Application_template.html">Application templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="Monitoring.html">Monitoring nginx and app servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Logs.html">Managing Logs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">XtendWeb</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Simpler reseller resource control</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="simpler-reseller-resource-control">
<h1>Simpler reseller resource control<a class="headerlink" href="#simpler-reseller-resource-control" title="Permalink to this headline">¶</a></h1>
<p>Simpler is an alternative to cloudLinux . Simpler use systemd available in modern system to offer resource control.
The adavantages of simpler are</p>
<ol class="arabic simple">
<li>No need of a custom kernel</li>
<li>Resource isolation at Reseller level ,instead of user level</li>
<li>No additional software is required</li>
<li>Future proof as Simpler can follow future development trends in Kernel and Systemd without additional patching</li>
<li>And the best of all - Its simple and straightforward - Simplicity is the ultimate sophistication</li>
</ol>
<div class="section" id="how-does-simpler-work">
<h2>How does simpleR work<a class="headerlink" href="#how-does-simpler-work" title="Permalink to this headline">¶</a></h2>
<p>Simpler needs the php-fpm management system provided by <a class="reference external" href="https://xtendweb.gnusys.net/">https://xtendweb.gnusys.net/</a></p>
<p>XtendWeb forks a seperate PHP-FPM/HHVM  master process for each user (did we say its more secure too?) and XtendWeb
scripts automatically assign the process to a slice named after the reseller . The slice is a systemd unit that can have
resource controls using cgroup. In short you can view all PHP-FPM process/HHVM process running under a reseller as a single entity
and manage its resource simply by editing the reseller resource from the WHM User Interface</p>
</div>
<div class="section" id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Why are you not providing user level resource control</li>
</ol>
<blockquote>
<div>In fact this is more easier than doing it at the reseller level. We thought reseller level control is more apt.
You can say like all accounts under reseller x use 4 GB of RAM and 1/2 of the processing power .
Its more easy to visualize and manage</div></blockquote>
<ol class="arabic" start="2">
<li><p class="first">Why only php-fpm?. Cant you manage Apache httpd,mysql, nginx etc?</p>
<p>Sure why not . Each process in a systemd managed system can have resource limit . We feel that php-fpm will be the culprit when things go bad.
Please see examples below on how you can set a upper limit to resource used by httpd,mysql etc.</p>
</li>
<li><p class="first">Does this work with Apache httpd?</p>
<p>Yes it works with apache httpd as well . XtendWeb php-fpm system is integrated with apache httpd and users are provided
with the php-fpm selector plugin from which they can manage php version on a per website basis.</p>
</li>
<li><p class="first">Why is Simpler Free</p>
<p>Simpler is bundled along with <a class="reference external" href="https://xtendweb.gnusys.net/">https://xtendweb.gnusys.net/</a> . Together with Simpler,XtendWeb and XtendWeb cluster it offers a webhost or enterprise
to have a great , stable ,high available and scalable hosting infrastructure . The software is all free and open source .
But all support ,Installation assistance etc is commercial. GNUSYS is a service centric company and we charge only for the support services provided and not the product</p>
</li>
</ol>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Simpler needs systemd .So you will need CentOS7 or RHEL7 .The php-fpm management is provided by XtendWeb so you will need XtendWeb
installed as well . You dont need to switch to native nginx.But we urge that you try the native nginx feature as well of XtendWeb .</p>
<ol class="arabic simple">
<li>Install XtendWeb : <a class="reference external" href="https://xtendweb.gnusys.net/docs/installation_standalone.html">https://xtendweb.gnusys.net/docs/installation_standalone.html</a></li>
</ol>
<p>2. Enable secure PHP-FPM</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nDeploy</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">init_backends</span><span class="o">.</span><span class="n">py</span> <span class="n">secure</span><span class="o">-</span><span class="n">php</span>
</pre></div>
</div>
<p>3. Enable httpd-php ( this enables Apache httpd to use php-fpm )</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nDeploy</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">init_backends</span><span class="o">.</span><span class="n">py</span> <span class="n">httpd</span><span class="o">-</span><span class="n">php</span><span class="o">-</span><span class="n">install</span>
</pre></div>
</div>
<p>4. Autofix configuration</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nDeploy</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">attempt_autofix</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>5. Install SimpleR WHM plugin</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="o">--</span><span class="n">enablerepo</span><span class="o">=</span><span class="n">ndeploy</span> <span class="n">install</span> <span class="n">simpler</span><span class="o">-</span><span class="n">nDeploy</span>
</pre></div>
</div>
<p>Installation is complete and you can manage reseller resources from WHM &gt;&gt; Home »Plugins &gt;&gt; SimpleR Reseller Resource</p>
</div>
<div class="section" id="default-resource">
<h2>Default resource<a class="headerlink" href="#default-resource" title="Permalink to this headline">¶</a></h2>
<p>The default resource a reseller gets on creation in WHM is controlled by the file</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># cat /opt/nDeploy/conf/simpler_resources.j2</span>
<span class="p">[</span><span class="n">Unit</span><span class="p">]</span>
<span class="n">Description</span><span class="o">=</span><span class="p">{{</span> <span class="n">OWNER</span> <span class="p">}}</span> <span class="n">Slice</span>
<span class="n">DefaultDependencies</span><span class="o">=</span><span class="n">no</span>
<span class="n">Before</span><span class="o">=</span><span class="n">slices</span><span class="o">.</span><span class="n">target</span>

<span class="p">[</span><span class="n">Slice</span><span class="p">]</span>
<span class="n">CPUShares</span><span class="o">=</span><span class="mi">1024</span>
<span class="n">MemoryLimit</span><span class="o">=</span><span class="mi">4</span><span class="n">G</span>
<span class="n">BlockIOWeight</span><span class="o">=</span><span class="mi">1000</span>
<span class="c1"># CPUWeight=200</span>
<span class="c1"># MemoryHigh=2G</span>
<span class="c1"># IOWeight=200</span>
</pre></div>
</div>
<p>If you need a different set of values do</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nDeploy</span><span class="o">/</span><span class="n">conf</span><span class="o">/</span><span class="n">simpler_resources</span><span class="o">.</span><span class="n">j2</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nDeploy</span><span class="o">/</span><span class="n">conf</span><span class="o">/</span><span class="n">simpler_resources_local</span><span class="o">.</span><span class="n">j2</span> <span class="c1"># Adjust simpler_resources_local.j2 accordingly</span>
</pre></div>
</div>
</div>
<div class="section" id="tools-to-view-resource-usage">
<h2>Tools to view resource usage<a class="headerlink" href="#tools-to-view-resource-usage" title="Permalink to this headline">¶</a></h2>
<p>Tools are provided by systemd</p>
<p>To view reseller slice.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span># systemctl status root.slice
● root.slice - root Slice
   Loaded: loaded (/etc/systemd/system/root.slice; static; vendor preset: disabled)
   Active: active since Fri 2017-05-12 07:12:17 UTC; 2h 21min ago
   Memory: 164.7M (limit: 250.0M)
   CGroup: /root.slice
           ├─CPANELPHP70@godisgreat.service
           │ └─31361 php-fpm: master process (/opt/nDeploy/secure-php-fpm.d/godisgreat.conf)
           └─ndeploy_hhvm@godisgreat.service
             └─30776 /usr/local/bin/hhvm --config /opt/nDeploy/hhvm.d/godisgreat.ini --user godisgreat --mode daemon

May 12 07:16:02 li1311-27.members.linode.com hhvm[30776]: [Fri May 12 07:16:02 2017] [hphp] [30776:7f90c1325580:0:000056] [] BootStats: xmlInitParser = 0ms wall, 0ms cpu, 0 MB RSS
May 12 07:18:37 li1311-27.members.linode.com php-fpm::godisgreat[31361]: [NOTICE] [pool godisgreat] &#39;user&#39; directive is ignored when FPM is not running as root
May 12 07:18:37 li1311-27.members.linode.com php-fpm[31361]: [NOTICE] [pool godisgreat] &#39;user&#39; directive is ignored when FPM is not running as root
May 12 07:18:37 li1311-27.members.linode.com php-fpm::godisgreat[31361]: [NOTICE] [pool godisgreat] &#39;group&#39; directive is ignored when FPM is not running as root
May 12 07:18:37 li1311-27.members.linode.com php-fpm[31361]: [NOTICE] [pool godisgreat] &#39;group&#39; directive is ignored when FPM is not running as root
May 12 07:18:37 li1311-27.members.linode.com php-fpm::godisgreat[31361]: [NOTICE] using inherited socket fd=3, &quot;/opt/cpanel/ea-php70/root/var/run/godisgreat.sock&quot;
May 12 07:18:37 li1311-27.members.linode.com php-fpm[31361]: [NOTICE] using inherited socket fd=3, &quot;/opt/cpanel/ea-php70/root/var/run/godisgreat.sock&quot;
May 12 07:18:37 li1311-27.members.linode.com php-fpm::godisgreat[31361]: [NOTICE] fpm is running, pid 31361
May 12 07:18:37 li1311-27.members.linode.com php-fpm::godisgreat[31361]: [NOTICE] ready to handle connections
May 12 07:18:37 li1311-27.members.linode.com php-fpm::godisgreat[31361]: [NOTICE] systemd monitor interval set to 10000ms
</pre></div>
</div>
<p>To view which reseller is consuming more resource</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">systemd</span><span class="o">-</span><span class="n">cgtop</span>

<span class="n">Path</span>                                                                                                                                               <span class="n">Tasks</span>   <span class="o">%</span><span class="n">CPU</span>   <span class="n">Memory</span>  <span class="n">Input</span><span class="o">/</span><span class="n">s</span> <span class="n">Output</span><span class="o">/</span><span class="n">s</span>

<span class="o">/</span>                                                                                                                                                    <span class="mi">106</span>    <span class="mf">1.8</span>   <span class="mf">676.8</span><span class="n">M</span>        <span class="o">-</span>        <span class="o">-</span>
<span class="o">/</span><span class="n">user</span><span class="o">.</span><span class="n">slice</span>                                                                                                                                           <span class="mi">10</span>    <span class="mf">1.2</span>    <span class="mf">87.5</span><span class="n">M</span>        <span class="o">-</span>        <span class="o">-</span>
<span class="o">/</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span>                                                                                                                                         <span class="mi">50</span>    <span class="mf">0.5</span>   <span class="mf">158.7</span><span class="n">M</span>        <span class="o">-</span>        <span class="o">-</span>
<span class="o">/</span><span class="n">root</span><span class="o">.</span><span class="n">slice</span>                                                                                                                                            <span class="mi">2</span>    <span class="mf">0.0</span>   <span class="mf">164.7</span><span class="n">M</span>        <span class="o">-</span>        <span class="o">-</span>
<span class="o">/</span><span class="n">root</span><span class="o">.</span><span class="n">slice</span><span class="o">/</span><span class="n">CPANELPHP70</span><span class="nd">@godisgreat</span><span class="o">.</span><span class="n">service</span>                                                                                                             <span class="mi">1</span>      <span class="o">-</span>        <span class="o">-</span>        <span class="o">-</span>        <span class="o">-</span>
<span class="o">/</span><span class="n">root</span><span class="o">.</span><span class="n">slice</span><span class="o">/</span><span class="n">ndeploy_hhvm</span><span class="nd">@godisgreat</span><span class="o">.</span><span class="n">service</span>                                                                                                            <span class="mi">1</span>      <span class="o">-</span>        <span class="o">-</span>        <span class="o">-</span>        <span class="o">-</span>
</pre></div>
</div>
<p>Note that the above gives resource usage on a per process level and also at the reseller level. Look for resellername.slice for the reseller level usage</p>
<p>To know more about systemd-resource-control</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># man systemd.resource-control</span>
</pre></div>
</div>
</div>
<div class="section" id="limit-httpd-resource">
<h2>Limit httpd resource<a class="headerlink" href="#limit-httpd-resource" title="Permalink to this headline">¶</a></h2>
<p>Since dynamic page is served by php-fpm . Apache httpd is left with dealing mostly static pages and other web server jobs .
This does not cause much issues unless you are under an attack etc. In such situation you can place an upper limit to resource
that can be used by Apache httpd</p>
<div class="highlight-default"><div class="highlight"><pre><span></span># systemctl status httpd.service
● httpd.service - Apache web server managed by cPanel EasyApache
   Loaded: loaded (/etc/systemd/system/httpd.service; enabled; vendor preset: disabled)
   Active: active (running) since Fri 2017-05-12 07:01:15 UTC; 3h 45min ago
 Main PID: 27720 (httpd)
   CGroup: /system.slice/httpd.service
           ├─ 5858 /usr/local/cpanel/3rdparty/bin/perl /usr/local/cpanel/bin/leechprotect
           ├─ 5859 /usr/sbin/httpd -k start
           ├─ 5860 /usr/sbin/httpd -k start
           ├─ 5861 /usr/sbin/httpd -k start
           ├─ 5862 /usr/sbin/httpd -k start
           ├─ 5863 /usr/sbin/httpd -k start
           ├─ 6117 /usr/sbin/httpd -k start
           └─27720 /usr/sbin/httpd -k start

May 12 07:01:14 li1311-27.members.linode.com systemd[1]: Starting Apache web server managed by cPanel EasyApache...
May 12 07:01:15 li1311-27.members.linode.com systemd[1]: PID file /run/apache2/httpd.pid not readable (yet?) after start.
May 12 07:01:15 li1311-27.members.linode.com systemd[1]: Started Apache web server managed by cPanel EasyApache.

vi /etc/systemd/system/httpd.service
# Add below settings under the [Service] section

CPUShares=1024
MemoryLimit=8G
BlockIOWeight=1000
</pre></div>
</div>
<p>You can follow the same procedure and put a upper limit to resource used by mysql by editing /etc/systemd/system/mysql.service</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Did you know that the XtendWeb plugin you installed for Simpler can serve contents using the highly effecient nginx web server ?
This is something you must try out instead of limiting resource used by Apache httpd</p>
</div>
</div>
<div class="section" id="to-view-systemd-config-loaded">
<h2>To view systemd config loaded<a class="headerlink" href="#to-view-systemd-config-loaded" title="Permalink to this headline">¶</a></h2>
<p>Run following command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">cat</span> <span class="n">CPANELPHP56</span><span class="nd">@cpaneluser</span><span class="o">.</span><span class="n">service</span>  <span class="c1"># Assuming php56 is used and user is cpaneluser</span>
</pre></div>
</div>
</div>
<div class="section" id="to-view-the-cgroup-tree">
<h2>To view the cgroup tree<a class="headerlink" href="#to-view-the-cgroup-tree" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">systemd</span><span class="o">-</span><span class="n">cgls</span>    <span class="c1"># You will see a slice named aftereach reseller</span>
</pre></div>
</div>
</div>
<div class="section" id="support">
<h2>Support?<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h2>
<p>Please email <a class="reference external" href="mailto:ops&#37;&#52;&#48;gnusys&#46;net">ops<span>&#64;</span>gnusys<span>&#46;</span>net</a> for commercial support . Anoop Alias (aka gnusys) can be hired for all kinds of sysadmin/DevOps job</p>
<p>Please contact : <a class="reference external" href="mailto:anoop&#37;&#52;&#48;gnusys&#46;net">anoop<span>&#64;</span>gnusys<span>&#46;</span>net</a> .</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Support.html" class="btn btn-neutral float-right" title="Support" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="user_docs.html" class="btn btn-neutral" title="XtendWeb User docs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Anoop P Alias.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>